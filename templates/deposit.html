{% extends "base.html" %} 
{% block title %}Nạp tiền tài khoản{% endblock %} 
{% block content %}

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      
      <div class="card shadow-lg border-0" style="background-color: #1e222d; color: #d1d4dc;">
        
        <div class="card-header border-bottom border-secondary p-4 text-center" style="background-color: #1e222d;">
          <h4 class="mb-0 fw-bold text-warning">
            <i class="bi bi-wallet2"></i> NẠP TIỀN
          </h4>
          <p class="text-secondary small mb-0 mt-1">Nạp tiền vào tài khoản giao dịch</p>
        </div>

        <div class="card-body p-4">
          {% with messages = get_flashed_messages(with_categories=true) %} 
            {% if messages %} 
              {% for category, message in messages %}
              <div class="alert alert-{{ category }} alert-dismissible fade show shadow-sm" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              {% endfor %} 
            {% endif %} 
          {% endwith %}

          <div class="p-3 mb-4 rounded border border-secondary d-flex justify-content-between align-items-center" style="background-color: rgba(0, 0, 0, 0.2);">
             <div>
                <small class="text-secondary d-block">Số dư khả dụng:</small>
                <span class="fs-4 fw-bold text-white">{{ "{:,.0f}".format(current_user.balance) }} ₫</span>
             </div>
             <i class="bi bi-cash-stack fs-1 text-success opacity-50"></i>
          </div>

          <form method="post" action="{{ url_for('trade.deposit') }}" id="depositForm">
            <div class="mb-3">
              <label class="form-label text-secondary small">Nhập số tiền (VNĐ)</label>
              <div class="input-group input-group-lg">
                <input 
                  type="number" 
                  name="amount" 
                  id="amountInput"
                  class="form-control bg-dark text-white border-secondary fw-bold" 
                  placeholder="0" 
                  required 
                  min="10000" 
                  step="10000"
                  style="font-size: 1.5rem;"
                />
                <span class="input-group-text bg-secondary text-white border-secondary">VNĐ</span>
              </div>
              <div class="form-text text-secondary mt-2 small">
                * Tối thiểu 10,000 VNĐ.
              </div>
            </div>

            <div class="mb-4">
                <label class="form-label text-secondary small mb-2">Chọn nhanh:</label>
                <div class="d-flex flex-wrap gap-2">
                    <button type="button" onclick="setAmount(10000000)" class="btn btn-outline-secondary btn-sm flex-fill">10 Triệu</button>
                    <button type="button" onclick="setAmount(50000000)" class="btn btn-outline-secondary btn-sm flex-fill">50 Triệu</button>
                    <button type="button" onclick="setAmount(100000000)" class="btn btn-outline-secondary btn-sm flex-fill">100 Triệu</button>
                    <button type="button" onclick="setAmount(500000000)" class="btn btn-outline-secondary btn-sm flex-fill">500 Triệu</button>
                </div>
            </div>

            <div class="d-grid gap-3">
              <button type="submit" class="btn btn-success btn-lg fw-bold shadow">
                <i class="bi bi-check-circle-fill"></i> XÁC NHẬN NẠP
              </button>
              <a href="{{ url_for('market.market') }}" class="btn btn-outline-secondary text-decoration-none">
                <i class="bi bi-arrow-left"></i> Quay lại thị trường
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    // Hàm hỗ trợ chọn nhanh số tiền
    function setAmount(val) {
        document.getElementById('amountInput').value = val;
    }
</script>

{% endblock %}