{% extends "base.html" %} {% block title %}Lịch sử giao dịch{% endblock %} {%
block content %}
<div class="container mt-4">
  <h2 class="text-white mb-4 border-bottom border-secondary pb-2">
    Lịch sử giao dịch
  </h2>

  <div class="card bg-dark border-secondary">
    <div class="card-body p-0">
      <table
        class="table table-dark table-hover mb-0"
        style="font-size: 0.95rem"
      >
        <thead class="bg-secondary text-uppercase text-white small">
          <tr>
            <th class="py-3 ps-4">Thời gian</th>
            <th class="py-3">Loại lệnh</th>
            <th class="py-3">Mã CK</th>
            <th class="py-3 text-end">Khối lượng</th>
            <th class="py-3 text-end">Giá khớp</th>
            <th class="py-3 text-end pe-4">Tổng giá trị</th>
          </tr>
        </thead>
        <tbody>
          {% for t in transactions %}
          <tr>
            <td class="ps-4 align-middle text-white">{{ t.timestamp }}</td>

            <td class="align-middle">
              {% if t.type == 'BUY' %}
              <span
                class="badge bg-success bg-opacity-25 text-success border border-success px-3"
                >MUA</span
              >
              {% elif t.type == 'SELL' %}
              <span
                class="badge bg-danger bg-opacity-25 text-danger border border-danger px-3"
                >BÁN</span
              >
              {% elif t.type == 'deposit' %}
              <span
                class="badge bg-primary bg-opacity-25 text-primary border border-primary px-3"
                >NẠP TIỀN</span
              >
              {% endif %}
            </td>

            <td class="align-middle fw-bold text-white">{{ t.symbol }}</td>

            <td class="align-middle text-end">
              {% if t.quantity > 0 %} {{ "{:,}".format(t.quantity) }} {% else %}
              - {% endif %}
            </td>

            <td class="align-middle text-end text-warning">
              {% if t.price > 0 %} {{ "{:,.0f}".format(t.price) }} ₫ {% else %}
              - {% endif %}
            </td>

            <td class="align-middle text-end pe-4 fw-bold">
              {% if t.type != 'deposit' %} {{ "{:,.0f}".format(t.price *
              t.quantity) }} ₫ {% else %}
              <span class="text-success"
                >+{{ "{:,.0f}".format(t.price) }} ₫</span
              >
              {% endif %}
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="6" class="text-center py-5 text-muted">
              <i class="bi bi-inbox fs-1 d-block mb-3"></i>
              Chưa có giao dịch nào
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
